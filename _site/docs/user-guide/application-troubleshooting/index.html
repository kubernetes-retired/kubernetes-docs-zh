

<!Doctype html>
<html id="docs">


<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="shortcut icon" type="image/png" href="/images/favicon.png">
	<link href='https://fonts.googleapis.com/css?family=Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic' rel='stylesheet' type='text/css'>
	<link href='https://fonts.googleapis.com/css?family=Roboto+Mono' rel='stylesheet' type='text/css'>
	<link rel="stylesheet" href="/css/styles.css"/>
	<script src="/js/jquery-2.2.0.min.js"></script>
	<script src="/js/script.js"></script>
	<title>Kubernetes - Troubleshooting Applications</title>
</head>
<body>
<div id="cellophane" onclick="kub.toggleMenu()"></div>
<header>
	<a href="/" class="logo"></a>
	<div class="nav-buttons" data-auto-burger="primary">
		<a href="/docs/" class="button" id="viewDocs">View Documentation</a>
		<a href="/docs/hellonode/" class="button" id="tryKubernetes">Try Kubernetes</a>
		<button id="hamburger" onclick="kub.toggleMenu()" data-auto-burger-exclude><div></div></button>
	</div>

	<nav id="mainNav">
		<main data-auto-burger="primary">
			<div class="nav-box">
				<h3><a href="/docs/hellonode/">Get Started</a></h3>
				<p>Built for a multi-cloud world, public, private or hybrid. Seamlessly roll out new features.</p>
			</div>
			<div class="nav-box">
				<h3><a href="/docs/">Documentation</a></h3>
				<p>Pellentesque in ipsum id orci porta dapibus. Nulla porttitor accumsan tincidunt. </p>
			</div>
			<div class="nav-box">
				<h3><a href="/community/">Community</a></h3>
				<p>Vestibulum ac diam sit amet quam vehicula elementum sed sit amet dui. </p>
			</div>
			<div class="nav-box">
				<h3><a href="http://blog.kubernetes.io">Blog</a></h3>
				<p>Curabitur arcu erat, accumsan id imperdiet et, porttitor at sem. Quisque velit nisi, pretium ut lacinia in. </p>
			</div>
		</main>
		<main data-auto-burger="primary">
			<div class="left">
				<h5 class="github-invite">Interested in hacking on the core Kubernetes code base?</h5>
				<a href="" class="button">View On Github</a>
			</div>

			<div class="right">
				<h5 class="github-invite">Explore the community</h5>
				<div class="social">
					<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
					<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
					<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
					<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>stackoverflow</span></a>
					<a href="https://groups.google.com/forum/#!forum/google-containers" class="mailing-list"><span>Mailing List</span></a>
					<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
				</div>
			</div>
			<div class="clear" style="clear: both"></div>
		</main>
	</nav>
</header>


<!--  HERO  -->
<section id="hero" class="light-text">
	<h1>Support</h1>
	<h5>Troubleshooting resources, frequently asked questions, and community support channels.</h5>
	<div id="vendorStrip" class="light-text">
		<ul>
			<li><a href="/docs/">GUIDES</a></li>
			<li><a href="/docs/reference">REFERENCE</a></li>
			<li><a href="/docs/samples">SAMPLES</a></li>
			<li><a href="/docs/troubleshooting/">SUPPORT</a></li>
		</ul><!--
		<div class="dropdown">
			<div class="readout"></div>
			<a href="/v1.1/">Version 1.1</a>
            <a href="/v1.2/">Version 1.2</a>
		</div>-->
		<input type="text" id="search" placeholder="Search" onkeydown="if (event.keyCode==13) window.location.replace('/docs/search/?q=' + this.value)">
	</div>
</section>

<section id="encyclopedia">
	<div id="docsToc">
        <div class="pi-accordion">
        
    <a class="item" data-title="Support" href="/docs/troubleshooting/"></a>
<div class="item" data-title="Troubleshooting">
  <div class="container">
    <a class="item" data-title="Web Interface" href="/docs/user-guide/ui/"></a>
    <a class="item" data-title="Application Introspection and Debugging" href="/docs/user-guide/introspection-and-debugging/"></a>
    <a class="item" data-title="Retrieving Logs" href="/docs/user-guide/logging/"></a>
    <a class="item" data-title="Troubleshooting Applications" href="/docs/user-guide/application-troubleshooting/"></a>
    <a class="item" data-title="Troubleshooting Clusters" href="/docs/admin/cluster-troubleshooting/"></a>
    <a class="item" data-title="Debugging Services" href="/docs/user-guide/debugging-services/"></a>
  </div>
</div>
<div class="item" data-title="Frequently Asked Questions">
  <div class="container">
    <a class="item" data-title="User FAQ" href="https://github.com/kubernetes/kubernetes/wiki/User-FAQ/" target='_blank'></a>
    <a class="item" data-title="Debugging FAQ" href="https://github.com/kubernetes/kubernetes/wiki/Debugging-FAQ/" target='_blank'></a>
    <a class="item" data-title="Services FAQ" href="https://github.com/kubernetes/kubernetes/wiki/Services-FAQ/" target='_blank'></a>
  </div>
</div>
<div class="item" data-title="Other Resources">
  <div class="container">
    <a class="item" data-title="Known Issues" href="/docs/user-guide/known-issues/"></a>
    <a class="item" data-title="Kubernetes Issue Tracker on GitHub" href="https://github.com/kubernetes/kubernetes/issues/" target='_blank'></a>
    <a class="item" data-title="Report a Security Vulnerability" href="/docs/reporting-security-issues/"></a>
    <a class="item" data-title="Release Notes" href="https://github.com/kubernetes/kubernetes/releases/" target='_blank'></a>
    <a class="item" data-title="Release Roadmap" href="/docs/roadmap/"></a>
    <a class="item" data-title="Contributing to Kubernetes Documentation" href="/docs/editdocs/"></a>
  </div>
</div>
        </div> <!-- /pi-accordion -->
	</div> <!-- /docsToc -->
	<div id="docsContent">
        <p><a href="/docs/editdocs#docs/user-guide/application-troubleshooting.md" id="editPageButton">Edit This Page</a></p>
    	<h1>Troubleshooting Applications</h1>
		<p>This guide is to help users debug applications that are deployed into Kubernetes and not behaving correctly.
This is <em>not</em> a guide for people who want to debug their cluster.  For that you should check out
<a href="/docs/admin/cluster-troubleshooting">this guide</a></p>

<ul id="markdown-toc">
  <li><a href="#faq" id="markdown-toc-faq">FAQ</a></li>
  <li><a href="#diagnosing-the-problem" id="markdown-toc-diagnosing-the-problem">Diagnosing the problem</a>    <ul>
      <li><a href="#debugging-pods" id="markdown-toc-debugging-pods">Debugging Pods</a>        <ul>
          <li><a href="#my-pod-stays-pending" id="markdown-toc-my-pod-stays-pending">My pod stays pending</a></li>
          <li><a href="#my-pod-stays-waiting" id="markdown-toc-my-pod-stays-waiting">My pod stays waiting</a></li>
          <li><a href="#my-pod-is-crashing-or-otherwise-unhealthy" id="markdown-toc-my-pod-is-crashing-or-otherwise-unhealthy">My pod is crashing or otherwise unhealthy</a></li>
          <li><a href="#my-pod-is-running-but-not-doing-what-i-told-it-to-do" id="markdown-toc-my-pod-is-running-but-not-doing-what-i-told-it-to-do">My pod is running but not doing what I told it to do</a></li>
        </ul>
      </li>
      <li><a href="#debugging-replication-controllers" id="markdown-toc-debugging-replication-controllers">Debugging Replication Controllers</a></li>
      <li><a href="#debugging-services" id="markdown-toc-debugging-services">Debugging Services</a>        <ul>
          <li><a href="#my-service-is-missing-endpoints" id="markdown-toc-my-service-is-missing-endpoints">My service is missing endpoints</a></li>
          <li><a href="#network-traffic-is-not-forwarded" id="markdown-toc-network-traffic-is-not-forwarded">Network traffic is not forwarded</a></li>
          <li><a href="#more-information" id="markdown-toc-more-information">More information</a></li>
        </ul>
      </li>
    </ul>
  </li>
</ul>

<h2 id="faq">FAQ</h2>

<p>Users are highly encouraged to check out our <a href="https://github.com/kubernetes/kubernetes/wiki/User-FAQ">FAQ</a></p>

<h2 id="diagnosing-the-problem">Diagnosing the problem</h2>

<p>The first step in troubleshooting is triage.  What is the problem?  Is it your Pods, your Replication Controller or
your Service?</p>

<ul>
  <li><a href="#debugging-pods">Debugging Pods</a></li>
  <li><a href="#debugging-replication-controllers">Debugging Replication Controllers</a></li>
  <li><a href="#debugging-services">Debugging Services</a></li>
</ul>

<h3 id="debugging-pods">Debugging Pods</h3>

<p>The first step in debugging a Pod is taking a look at it.  Check the current state of the Pod and recent events with the following command:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>kubectl describe pods <span class="k">${</span><span class="nv">POD_NAME</span><span class="k">}</span>
</code></pre>
</div>

<p>Look at the state of the containers in the pod.  Are they all <code class="highlighter-rouge">Running</code>?  Have there been recent restarts?</p>

<p>Continue debugging depending on the state of the pods.</p>

<h4 id="my-pod-stays-pending">My pod stays pending</h4>

<p>If a Pod is stuck in <code class="highlighter-rouge">Pending</code> it means that it can not be scheduled onto a node.  Generally this is because
there are insufficient resources of one type or another that prevent scheduling.  Look at the output of the
<code class="highlighter-rouge">kubectl describe ...</code> command above.  There should be messages from the scheduler about why it can not schedule
your pod.  Reasons include:</p>

<ul>
  <li>
    <p><strong>You don’t have enough resources</strong>:  You may have exhausted the supply of CPU or Memory in your cluster, in this case
you need to delete Pods, adjust resource requests, or add new nodes to your cluster. See <a href="/docs/user-guide/compute-resources/#my-pods-are-pending-with-event-message-failedscheduling">Compute Resources document</a> for more information.</p>
  </li>
  <li>
    <p><strong>You are using <code class="highlighter-rouge">hostPort</code></strong>:  When you bind a Pod to a <code class="highlighter-rouge">hostPort</code> there are a limited number of places that pod can be
scheduled.  In most cases, <code class="highlighter-rouge">hostPort</code> is unnecessary, try using a Service object to expose your Pod.  If you do require
<code class="highlighter-rouge">hostPort</code> then you can only schedule as many Pods as there are nodes in your Kubernetes cluster.</p>
  </li>
</ul>

<h4 id="my-pod-stays-waiting">My pod stays waiting</h4>

<p>If a Pod is stuck in the <code class="highlighter-rouge">Waiting</code> state, then it has been scheduled to a worker node, but it can’t run on that machine.
Again, the information from <code class="highlighter-rouge">kubectl describe ...</code> should be informative.  The most common cause of <code class="highlighter-rouge">Waiting</code> pods is a failure to pull the image.  There are three things to check:</p>

<ul>
  <li>Make sure that you have the name of the image correct</li>
  <li>Have you pushed the image to the repository?</li>
  <li>Run a manual <code class="highlighter-rouge">docker pull &lt;image&gt;</code> on your machine to see if the image can be pulled.</li>
</ul>

<h4 id="my-pod-is-crashing-or-otherwise-unhealthy">My pod is crashing or otherwise unhealthy</h4>

<p>First, take a look at the logs of
the current container:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>kubectl logs <span class="k">${</span><span class="nv">POD_NAME</span><span class="k">}</span> <span class="k">${</span><span class="nv">CONTAINER_NAME</span><span class="k">}</span>
</code></pre>
</div>

<p>If your container has previously crashed, you can access the previous container’s crash log with:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>kubectl logs --previous <span class="k">${</span><span class="nv">POD_NAME</span><span class="k">}</span> <span class="k">${</span><span class="nv">CONTAINER_NAME</span><span class="k">}</span>
</code></pre>
</div>

<p>Alternately, you can run commands inside that container with <code class="highlighter-rouge">exec</code>:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>kubectl <span class="nb">exec</span> <span class="k">${</span><span class="nv">POD_NAME</span><span class="k">}</span> -c <span class="k">${</span><span class="nv">CONTAINER_NAME</span><span class="k">}</span> -- <span class="k">${</span><span class="nv">CMD</span><span class="k">}</span> <span class="k">${</span><span class="nv">ARG1</span><span class="k">}</span> <span class="k">${</span><span class="nv">ARG2</span><span class="k">}</span> ... <span class="k">${</span><span class="nv">ARGN</span><span class="k">}</span>
</code></pre>
</div>

<p>Note that <code class="highlighter-rouge">-c ${CONTAINER_NAME}</code> is optional and can be omitted for Pods that only contain a single container.</p>

<p>As an example, to look at the logs from a running Cassandra pod, you might run</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>kubectl <span class="nb">exec </span>cassandra -- cat /var/log/cassandra/system.log
</code></pre>
</div>

<p>If none of these approaches work, you can find the host machine that the pod is running on and SSH into that host,
but this should generally not be necessary given tools in the Kubernetes API. Therefore, if you find yourself needing to ssh into a machine, please file a
feature request on GitHub describing your use case and why these tools are insufficient.</p>

<h4 id="my-pod-is-running-but-not-doing-what-i-told-it-to-do">My pod is running but not doing what I told it to do</h4>

<p>If your pod is not behaving as you expected, it may be that there was an error in your
pod description (e.g. <code class="highlighter-rouge">mypod.yaml</code> file on your local machine), and that the error
was silently ignored when you created the pod.  Often a section of the pod description
is nested incorrectly, or a key name is typed incorrectly, and so the key is ignored.
For example, if you misspelled <code class="highlighter-rouge">command</code> as <code class="highlighter-rouge">commnd</code> then the pod will be created but
will not use the command line you intended it to use.</p>

<p>The first thing to do is to delete your pod and try creating it again with the <code class="highlighter-rouge">--validate</code> option.
For example, run <code class="highlighter-rouge">kubectl create --validate -f mypod.yaml</code>.
If you misspelled <code class="highlighter-rouge">command</code> as <code class="highlighter-rouge">commnd</code> then  will give an error like this:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>I0805 10:43:25.129850   46757 schema.go:126] unknown field: commnd
I0805 10:43:25.129973   46757 schema.go:129] this may be a <span class="nb">false </span>alarm, see https://github.com/kubernetes/kubernetes/issues/6842
pods/mypod
</code></pre>
</div>

<!-- TODO: Now that #11914 is merged, this advice may need to be updated -->

<p>The next thing to check is whether the pod on the apiserver
matches the pod you meant to create (e.g. in a yaml file on your local machine).
For example, run <code class="highlighter-rouge">kubectl get pods/mypod -o yaml &gt; mypod-on-apiserver.yaml</code> and then
manually compare the original pod description, <code class="highlighter-rouge">mypod.yaml</code> with the one you got
back from apiserver, <code class="highlighter-rouge">mypod-on-apiserver.yaml</code>.  There will typically be some
lines on the “apiserver” version that are not on the original version.  This is
expected.  However, if there are lines on the original that are not on the apiserver
version, then this may indicate a problem with your pod spec.</p>

<h3 id="debugging-replication-controllers">Debugging Replication Controllers</h3>

<p>Replication controllers are fairly straightforward.  They can either create Pods or they can’t.  If they can’t
create pods, then please refer to the <a href="#debugging-pods">instructions above</a> to debug your pods.</p>

<p>You can also use <code class="highlighter-rouge">kubectl describe rc ${CONTROLLER_NAME}</code> to introspect events related to the replication
controller.</p>

<h3 id="debugging-services">Debugging Services</h3>

<p>Services provide load balancing across a set of pods.  There are several common problems that can make Services
not work properly.  The following instructions should help debug Service problems.</p>

<p>First, verify that there are endpoints for the service. For every Service object, the apiserver makes an <code class="highlighter-rouge">endpoints</code> resource available.</p>

<p>You can view this resource with:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>kubectl get endpoints <span class="k">${</span><span class="nv">SERVICE_NAME</span><span class="k">}</span>
</code></pre>
</div>

<p>Make sure that the endpoints match up with the number of containers that you expect to be a member of your service.
For example, if your Service is for an nginx container with 3 replicas, you would expect to see three different
IP addresses in the Service’s endpoints.</p>

<h4 id="my-service-is-missing-endpoints">My service is missing endpoints</h4>

<p>If you are missing endpoints, try listing pods using the labels that Service uses.  Imagine that you have
a Service where the labels are:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="nn">...</span>
<span class="s">spec</span><span class="pi">:</span>
  <span class="pi">-</span> <span class="s">selector</span><span class="pi">:</span>
     <span class="s">name</span><span class="pi">:</span> <span class="s">nginx</span>
     <span class="s">type</span><span class="pi">:</span> <span class="s">frontend</span>
</code></pre>
</div>

<p>You can use:</p>

<div class="highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>kubectl get pods --selector<span class="o">=</span><span class="nv">name</span><span class="o">=</span>nginx,type<span class="o">=</span>frontend
</code></pre>
</div>

<p>to list pods that match this selector.  Verify that the list matches the Pods that you expect to provide your Service.</p>

<p>If the list of pods matches expectations, but your endpoints are still empty, it’s possible that you don’t
have the right ports exposed.  If your service has a <code class="highlighter-rouge">containerPort</code> specified, but the Pods that are
selected don’t have that port listed, then they won’t be added to the endpoints list.</p>

<p>Verify that the pod’s <code class="highlighter-rouge">containerPort</code> matches up with the Service’s <code class="highlighter-rouge">containerPort</code></p>

<h4 id="network-traffic-is-not-forwarded">Network traffic is not forwarded</h4>

<p>If you can connect to the service, but the connection is immediately dropped, and there are endpoints
in the endpoints list, it’s likely that the proxy can’t contact your pods.</p>

<p>There are three things to
check:</p>

<ul>
  <li>Are your pods working correctly?  Look for restart count, and <a href="#debugging-pods">debug pods</a></li>
  <li>Can you connect to your pods directly?  Get the IP address for the Pod, and try to connect directly to that IP</li>
  <li>Is your application serving on the port that you configured?  Kubernetes doesn’t do port remapping, so if your application serves on 8080, the <code class="highlighter-rouge">containerPort</code> field needs to be 8080.</li>
</ul>

<h4 id="more-information">More information</h4>

<p>If none of the above solves your problem, follow the instructions in <a href="/docs/user-guide/debugging-services">Debugging Service document</a> to make sure that your <code class="highlighter-rouge">Service</code> is running, has <code class="highlighter-rouge">Endpoints</code>, and your <code class="highlighter-rouge">Pods</code> are actually serving; you have DNS working, iptables rules installed, and kube-proxy does not seem to be misbehaving.</p>

<p>You may also visit <a href="/docs/troubleshooting/">troubleshooting document</a> for more information.</p>

        <p><a href=""><img src="https://kubernetes-site.appspot.com/UA-36037335-10/GitHub/docs/user-guide/application-troubleshooting.md?pixel" alt="Analytics" /></a>
        <div id="pd_rating_holder_8345992"></div>
		<script type="text/javascript">
        PDRTJS_settings_8345992 = {
        "id" : "8345992",
        "unique_id" : "/docs/user-guide/application-troubleshooting/",
        "title" : "Troubleshooting Applications",
        "permalink" : "http://kubernetes.github.io/docs/user-guide/application-troubleshooting/"
        };
        (function(d,c,j){if(!document.getElementById(j)){var pd=d.createElement(c),s;pd.id=j;pd.src=('https:'==document.location.protocol)?'https://polldaddy.com/js/rating/rating.js':'http://i0.poll.fm/js/rating/rating.js';s=document.getElementsByTagName(c)[0];s.parentNode.insertBefore(pd,s);}}(document,'script','pd-rating-js'));
        </script>
	</div>
</section>

<footer>
	<main class="light-text">
		<nav>
			<a href="/docs/hellonode/">Get Started</a>
			<a href="/docs/">Documentation</a>
			<a href="http://blog.kubernetes.io/">Blog</a>
			<a href="/community/">Community</a>
		</nav>
		<div class="social">
			<a href="https://twitter.com/kubernetesio" class="twitter"><span>twitter</span></a>
			<a href="https://github.com/kubernetes/kubernetes" class="github"><span>Github</span></a>
			<a href="http://slack.k8s.io/" class="slack"><span>Slack</span></a>
			<a href="http://stackoverflow.com/questions/tagged/kubernetes" class="stack-overflow"><span>stackoverflow</span></a>
			<a href="https://groups.google.com/forum/#!forum/google-containers" class="mailing-list"><span>Mailing List</span></a>
			<a href="https://calendar.google.com/calendar/embed?src=nt2tcnbtbied3l6gi2h29slvc0%40group.calendar.google.com" class="calendar"><span>Events Calendar</span></a>
			<label for="wishField">I wish this page <input type="text" id="wishField" name="wishField" placeholder="enter your wish"></label>
		</div>
		<div class="center">&copy; 2016 Kubernetes</div>
	</main>
</footer>



<style>
	.cse .gsc-control-cse, .gsc-control-cse {
		padding: 0;
	}

	.gsc-above-wrapper-area {
		border-bottom: 0;
	}
</style>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36037335-10', 'auto');
  ga('send', 'pageview');
</script>
<!-- Commenting out AnswerDash for now; we need to work on our list of questions/answers/design first
<!-- Start of AnswerDash script <script>var AnswerDash;!function(e,t,n,s,a){if(!t.getElementById(s)){var i,r=t.createElement(n),c=t.getElementsByTagName(n)[0];e[a]||(i=e[a]=function(){i.__oninit.push(arguments)},i.__oninit=[]),r.type="text/javascript",r.async=!0,r.src="https://p1.answerdash.com/answerdash.min.js?siteid=756",r.setAttribute("id",s),c.parentNode.insertBefore(r,c)}}(window,document,"script","answerdash-script","AnswerDash");</script> <!-- End of AnswerDash script -->
-->
</body>
</html>